function configRouter(n,t){t.otherwise("/"),n.state("manga",{url:"/manga",templateUrl:"admin-site/scripts/components/manga/MangaView.html",controller:"MangaController"})}function configNotification(n){n.setOptions({delay:2e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"center",positionY:"top"})}function configBlockUI(n){n.message="Loading..",n.delay=100,n.autoBlock=!1}var AdminApp=angular.module("AdminApp",["ui.router","datatables","ui.bootstrap","ui.select","ui-notification","blockUI"]).config(configRouter).config(configNotification).config(configBlockUI);configRouter.$inject=["$stateProvider","$urlRouterProvider"],configNotification.$inject=["NotificationProvider"],configBlockUI.$inject=["blockUIConfig"];var Config=function(){return{apiDomain:"http://manga-backend.local/"}}();!function(){function n(n,t,e){function o(n,t){return this.send("GET",n,t)}function a(n,t){return this.send("POST",n,t)}function i(e,o,a){var i=t.defer(),r={method:e,url:o,timeout:i.promise,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(n){var t=[];for(var e in n)t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t.join("&")}};return"POST"==e.toUpperCase()?r.data=a:"GET"==e.toUpperCase()&&(r.params=a),n(r).then(function(n){return i.resolve(n.data)}).catch(function(n){return i.reject(n)}),i.promise.abort=function(){i.resolve()},i.promise}var r={get:o,post:a,send:i};return r}angular.module("AdminApp").factory("Request",n),n.$inject=["$http","$q","$window"]}(),function(){angular.module("AdminApp").filter("propsFilter",function(){return function(n,t){var e=[];if(angular.isArray(n)){var o=Object.keys(t);n.forEach(function(n){for(var a=!1,i=0;i<o.length;i++){var r=o[i],c=t[r].toLowerCase();if(n[r].toString().toLowerCase().indexOf(c)!==-1){a=!0;break}}a&&e.push(n)})}else e=n;return e}})}(),function(){function n(n,t,e,o,a,i,r,c){function u(n){a.initGrid(n)}function l(){var o=c.instances.get("createMangaBlock"),a=e.find(".manga-grid");v=t.open({templateUrl:"createMangaModal.html",scope:n,size:"lg",appendTo:a}),o.start(),i.getTags().then(function(t){return 0==t.status?(v.dismiss(),void r.error("Internal error")):(n.tags=t.tags,void o.stop())})}function s(){}function f(){v.dismiss()}function d(o){C=o;var a=e.find(".manga-grid");h=t.open({templateUrl:"editMangaModal.html",scope:n,appendTo:a})}function g(){console.log("update"+C)}function p(){h.dismiss()}function m(n){console.log("remove")}var v,h,C;n.tags=[],n.selectedTags=[],n.openEditManga=d,n.removeManga=m,n.updateManga=g,n.closeEditManga=p,n.openCreateManga=l,n.closeCreateManga=f,n.addManga=s,u(n)}angular.module("AdminApp").controller("MangaController",n),n.$inject=["$scope","$uibModal","$document","MangaService","MangaGrid","TagService","Notification","blockUI"]}(),function(){function n(n,t,e,o,a){function i(n){n.dtOptions=e.newOptions().withOption("ajax",{url:u,type:"GET",data:function(n,t){n.offset=n.start,n.limit=n.length,n.search=n.search.value,n.column=n.order[0].column,n.order=n.order[0].dir}}).withDataProp("data").withOption("serverSide",!0).withPaginationType("simple_numbers").withOption("drawCallback",c.bind(null,n)),n.dtColumns=[o.newColumn("manga_name"),o.newColumn("slug"),o.newColumn("view_count"),o.newColumn("like_count"),o.newColumn("id")],n.dtColumnDefs=[a.newColumnDef(0),a.newColumnDef(1).notSortable(),a.newColumnDef(2).notSortable(),a.newColumnDef(3).notSortable(),a.newColumnDef(4).notSortable().withOption("width","20%").renderWith(function(n,t,e){return r(n)})]}function r(n){var t='<div class="action"><button type="button" class="btn btn-primary update" ng-click="openEditManga('+n+')">Edit</button> <button type="button" class="btn btn-danger remove"  ng-click="removeManga('+n+')">Remove</button></div>';return t}function c(t,e){var o=angular.element(".action");angular.forEach(o,function(e){var o=n(angular.element(e).html())(t);angular.element(e).html(o)})}var u=Config.apiDomain+"mangas",l={initGrid:i};return l}angular.module("AdminApp").factory("MangaGrid",n),n.$inject=["$compile","MangaService","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder"]}(),function(){function n(){function n(){console.log("get from sv")}var t={get:n};return t}angular.module("AdminApp").factory("MangaService",n),n.$inject=[]}(),function(){function n(n){function t(){return n.send("GET",e)}var e=Config.apiDomain+"tags",o={getTags:t};return o}angular.module("AdminApp").factory("TagService",n),n.$inject=["Request"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInNoYXJlZC9SZXF1ZXN0LmpzIiwic2hhcmVkL2ZpbHRlcnMvcHJvcHNGaWx0ZXIuanMiLCJjb21wb25lbnRzL21hbmdhL01hbmdhQ29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvbWFuZ2EvTWFuZ2FHcmlkLmpzIiwiY29tcG9uZW50cy9tYW5nYS9NYW5nYVNlcnZpY2UuanMiLCJjb21wb25lbnRzL3RhZy9UYWdTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImNvbmZpZ1JvdXRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb25maWdOb3RpZmljYXRpb24iLCJOb3RpZmljYXRpb25Qcm92aWRlciIsInNldE9wdGlvbnMiLCJkZWxheSIsInN0YXJ0VG9wIiwic3RhcnRSaWdodCIsInZlcnRpY2FsU3BhY2luZyIsImhvcml6b250YWxTcGFjaW5nIiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwiY29uZmlnQmxvY2tVSSIsImJsb2NrVUlDb25maWciLCJtZXNzYWdlIiwiYXV0b0Jsb2NrIiwiQWRtaW5BcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGluamVjdCIsIkNvbmZpZyIsImFwaURvbWFpbiIsIlJlcXVlc3QiLCIkaHR0cCIsIiRxIiwiJHdpbmRvdyIsImdldCIsImRhdGEiLCJ0aGlzIiwic2VuZCIsInBvc3QiLCJtZXRob2QiLCJkZWZlcmVkIiwiZGVmZXIiLCJvcHRpb25zIiwidGltZW91dCIsInByb21pc2UiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwidHJhbnNmb3JtUmVxdWVzdCIsIm9iaiIsInN0ciIsInAiLCJwdXNoIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsInRvVXBwZXJDYXNlIiwicGFyYW1zIiwidGhlbiIsInJlc3BvbnNlIiwicmVzb2x2ZSIsImNhdGNoIiwiZXJyIiwicmVqZWN0IiwiYWJvcnQiLCJzZXJ2aWNlIiwiZmFjdG9yeSIsImZpbHRlciIsIml0ZW1zIiwicHJvcHMiLCJvdXQiLCJpc0FycmF5Iiwia2V5cyIsIk9iamVjdCIsImZvckVhY2giLCJpdGVtIiwiaXRlbU1hdGNoZXMiLCJpIiwibGVuZ3RoIiwicHJvcCIsInRleHQiLCJ0b0xvd2VyQ2FzZSIsInRvU3RyaW5nIiwiaW5kZXhPZiIsIk1hbmdhQ29udHJvbGxlciIsIiRzY29wZSIsIiR1aWJNb2RhbCIsIiRkb2N1bWVudCIsIk1hbmdhU2VydmljZSIsIk1hbmdhR3JpZCIsIlRhZ1NlcnZpY2UiLCJOb3RpZmljYXRpb24iLCJibG9ja1VJIiwiaW5pdCIsImluaXRHcmlkIiwib3BlbkNyZWF0ZU1hbmdhIiwiYmxvY2siLCJpbnN0YW5jZXMiLCJwYXJlbnRFbGUiLCJmaW5kIiwiY3JlYXRlTWFuZ2FNb2RhbCIsIm9wZW4iLCJzY29wZSIsInNpemUiLCJhcHBlbmRUbyIsInN0YXJ0IiwiZ2V0VGFncyIsInJlcyIsInN0YXR1cyIsImRpc21pc3MiLCJlcnJvciIsInRhZ3MiLCJzdG9wIiwiYWRkTWFuZ2EiLCJjbG9zZUNyZWF0ZU1hbmdhIiwib3BlbkVkaXRNYW5nYSIsIm1hbmdhSWQiLCJjdXJyZW50TWFuZ2FJZCIsImVkaXRNYW5nYU1vZGFsIiwidXBkYXRlTWFuZ2EiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VFZGl0TWFuZ2EiLCJyZW1vdmVNYW5nYSIsInNlbGVjdGVkVGFncyIsIiRjb21waWxlIiwiRFRPcHRpb25zQnVpbGRlciIsIkRUQ29sdW1uQnVpbGRlciIsIkRUQ29sdW1uRGVmQnVpbGRlciIsImR0T3B0aW9ucyIsIm5ld09wdGlvbnMiLCJ3aXRoT3B0aW9uIiwiTUFOR0FfTElTVF9BUEkiLCJ0eXBlIiwiZHRJbnN0YW5jZSIsIm9mZnNldCIsImxpbWl0Iiwic2VhcmNoIiwidmFsdWUiLCJjb2x1bW4iLCJvcmRlciIsImRpciIsIndpdGhEYXRhUHJvcCIsIndpdGhQYWdpbmF0aW9uVHlwZSIsImRyYXdDYWxsYmFjayIsImJpbmQiLCJkdENvbHVtbnMiLCJuZXdDb2x1bW4iLCJkdENvbHVtbkRlZnMiLCJuZXdDb2x1bW5EZWYiLCJub3RTb3J0YWJsZSIsInJlbmRlcldpdGgiLCJmdWxsIiwicmVuZGVyQWN0aW9uIiwiYnV0dG9uIiwiYWN0aW9uRWxlIiwiZWxlbWVudCIsImVsZSIsInRlbXBsYXRlIiwiaHRtbCIsIkdFVF9BTExfVEFHU19BUEkiLCJzZXJ2aWNlcyJdLCJtYXBwaW5ncyI6IkFBZ0JBLFFBQUFBLGNBQUFDLEVBQUFDLEdBQ0FBLEVBQUFDLFVBQUEsS0FFQUYsRUFBQUcsTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLFlBQUEscURBQ0FDLFdBQUEsb0JBUUEsUUFBQUMsb0JBQUFDLEdBQ0FBLEVBQUFDLFlBQ0FDLE1BQUEsSUFDQUMsU0FBQSxHQUNBQyxXQUFBLEdBQ0FDLGdCQUFBLEdBQ0FDLGtCQUFBLEdBQ0FDLFVBQUEsU0FDQUMsVUFBQSxRQUlBLFFBQUFDLGVBQUFDLEdBRUFBLEVBQUFDLFFBQUEsWUFHQUQsRUFBQVIsTUFBQSxJQUNBUSxFQUFBRSxXQUFBLEVBL0NBLEdBQUFDLFVBQUFDLFFBQ0FDLE9BQUEsWUFBQSxZQUFBLGFBQUEsZUFBQSxZQUFBLGtCQUFBLFlBQ0FDLE9BQUF6QixjQUNBeUIsT0FBQWpCLG9CQUNBaUIsT0FBQVAsY0FFQWxCLGNBQUEwQixTQUFBLGlCQUFBLHNCQUNBbEIsbUJBQUFrQixTQUFBLHdCQUNBUixjQUFBUSxTQUFBLGdCQ1RBLElBQUFDLFFBQUEsV0FFQSxPQUNBQyxVQUFBLG1DQ0hBLFdBT0EsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsR0FVQSxRQUFBQyxHQUFBNUIsRUFBQTZCLEdBQ0EsTUFBQUMsTUFBQUMsS0FBQSxNQUFBL0IsRUFBQTZCLEdBR0EsUUFBQUcsR0FBQWhDLEVBQUE2QixHQUNBLE1BQUFDLE1BQUFDLEtBQUEsT0FBQS9CLEVBQUE2QixHQUdBLFFBQUFFLEdBQUFFLEVBQUFqQyxFQUFBNkIsR0FDQSxHQUFBSyxHQUFB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SSxTQUFBZ0QsUUFBQWlGLEVBQUEsU0FBQUUsR0FDQSxHQUFBQyxHQUFBakMsRUFBQW5HLFFBQUFrSSxRQUFBQyxHQUFBRSxRQUFBMUUsRUFDQTNELFNBQUFrSSxRQUFBQyxHQUFBRSxLQUFBRCxLQTlEQSxHQUFBMUIsR0FBQXRHLE9BQUFDLFVBQUEsU0FFQWtDLEdBQ0E2QixTQUFBQSxFQUdBLE9BQUE3QixHQWRBdkMsUUFDQUMsT0FBQSxZQUNBdUMsUUFBQSxZQUFBdUIsR0FFQUEsRUFBQTVELFNBQUEsV0FBQSxlQUFBLG1CQUFBLGtCQUFBLHlCQ05BLFdBUUEsUUFBQTJELEtBT0EsUUFBQXBELEtBQ0FvRixRQUFBQyxJQUFBLGVBUEEsR0FBQXhELElBQ0E3QixJQUFBQSxFQUdBLE9BQUE2QixHQVhBdkMsUUFDQUMsT0FBQSxZQUNBdUMsUUFBQSxlQUFBc0IsR0FFQUEsRUFBQTNELGNDTkEsV0FRQSxRQUFBNkQsR0FBQTFELEdBUUEsUUFBQTBFLEtBQ0EsTUFBQTFFLEdBQUFPLEtBQUEsTUFBQXlILEdBUkEsR0FBQUEsR0FBQWxJLE9BQUFDLFVBQUEsT0FDQWtJLEdBQ0F2RCxRQUFBQSxFQUdBLE9BQUF1RCxHQVpBdkksUUFDQUMsT0FBQSxZQUNBdUMsUUFBQSxhQUFBd0IsR0FFQUEsRUFBQTdELFNBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgQWRtaW5BcHAgPSBhbmd1bGFyXHJcblx0Lm1vZHVsZShcIkFkbWluQXBwXCIsIFsndWkucm91dGVyJywgJ2RhdGF0YWJsZXMnLCAndWkuYm9vdHN0cmFwJywgJ3VpLnNlbGVjdCcsICd1aS1ub3RpZmljYXRpb24nLCAnYmxvY2tVSSddKVxyXG5cdC5jb25maWcoY29uZmlnUm91dGVyKVxyXG5cdC5jb25maWcoY29uZmlnTm90aWZpY2F0aW9uKVxyXG5cdC5jb25maWcoY29uZmlnQmxvY2tVSSk7XHJcblxyXG5cdGNvbmZpZ1JvdXRlci4kaW5qZWN0ID0gWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInXTtcclxuXHRjb25maWdOb3RpZmljYXRpb24uJGluamVjdCA9IFsnTm90aWZpY2F0aW9uUHJvdmlkZXInXTtcclxuXHRjb25maWdCbG9ja1VJLiRpbmplY3QgPSBbJ2Jsb2NrVUlDb25maWcnXTtcclxuXHJcblx0LyoqXHJcblx0ICogQ09uZmlnIHJvdXRlclxyXG5cdCAqIEBwYXJhbSAkc3RhdGVQcm92aWRlclxyXG5cdCAqIEBwYXJhbSAkdXJsUm91dGVyUHJvdmlkZXJcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBjb25maWdSb3V0ZXIoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpOyBcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnbWFuZ2EnLCB7XHJcblx0XHRcdHVybDogJy9tYW5nYScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnYWRtaW4tc2l0ZS9zY3JpcHRzL2NvbXBvbmVudHMvbWFuZ2EvTWFuZ2FWaWV3Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiBcIk1hbmdhQ29udHJvbGxlclwiXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbmZpZyBub2lmaWNhdGlvblxyXG5cdCAqIEBwYXJhbSBOb3RpZmljYXRpb25Qcm92aWRlclxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGNvbmZpZ05vdGlmaWNhdGlvbihOb3RpZmljYXRpb25Qcm92aWRlcikge1xyXG5cdFx0Tm90aWZpY2F0aW9uUHJvdmlkZXIuc2V0T3B0aW9ucyh7XHJcblx0XHRcdGRlbGF5OiAyMDAwLFxyXG5cdFx0XHRzdGFydFRvcDogMjAsXHJcblx0XHRcdHN0YXJ0UmlnaHQ6IDEwLFxyXG5cdFx0XHR2ZXJ0aWNhbFNwYWNpbmc6IDIwLFxyXG5cdFx0XHRob3Jpem9udGFsU3BhY2luZzogMjAsXHJcblx0XHRcdHBvc2l0aW9uWDogJ2NlbnRlcicsXHJcblx0XHRcdHBvc2l0aW9uWTogJ3RvcCdcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gY29uZmlnQmxvY2tVSShibG9ja1VJQ29uZmlnKSB7XHJcblx0XHQvLyBDaGFuZ2UgdGhlIGRlZmF1bHQgb3ZlcmxheSBtZXNzYWdlXHJcblx0XHRibG9ja1VJQ29uZmlnLm1lc3NhZ2UgPSAnTG9hZGluZy4uJztcclxuXHJcblx0XHQvLyBDaGFuZ2UgdGhlIGRlZmF1bHQgZGVsYXkgdG8gMTAwbXMgYmVmb3JlIHRoZSBibG9ja2luZyBpcyB2aXNpYmxlXHJcblx0XHRibG9ja1VJQ29uZmlnLmRlbGF5ID0gMTAwO1xyXG5cdFx0YmxvY2tVSUNvbmZpZy5hdXRvQmxvY2sgPSBmYWxzZTtcclxuXHJcblx0fTsiLCJ2YXIgQ29uZmlnID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0YXBpRG9tYWluOiAnaHR0cDovL21hbmdhLWJhY2tlbmQubG9jYWwvJ1xyXG5cdH1cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0FkbWluQXBwJylcclxuICAgICAgICAuZmFjdG9yeSgnUmVxdWVzdCcsIFJlcXVlc3QpO1xyXG5cclxuICAgICAgICBSZXF1ZXN0LiRpbmplY3QgPSBbJyRodHRwJywgJyRxJywgJyR3aW5kb3cnXTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gUmVxdWVzdCAoJGh0dHAsICRxLCAkd2luZG93KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgICAgIGdldDogZ2V0LFxyXG4gICAgICAgICAgICAgICAgcG9zdDogcG9zdCxcclxuICAgICAgICAgICAgICAgIHNlbmQ6IHNlbmRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlOyBcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldCh1cmwsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ0dFVCcsIHVybCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdQT1NUJywgdXJsLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2VuZChtZXRob2QsIHVybCwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IGRlZmVyZWQucHJvbWlzZSxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHAgaW4gb2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIuam9pbihcIiZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtZXRob2QudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXRob2QudG9VcHBlckNhc2UoKSA9PSAnR0VUJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucGFyYW1zID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJGh0dHAob3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyZWQucmVqZWN0KGVycilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGRlZmVyZWQucHJvbWlzZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQWRtaW5BcHAnKVxyXG4gICAgICAgIC5maWx0ZXIoJ3Byb3BzRmlsdGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtcywgcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNBcnJheShpdGVtcykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1NYXRjaGVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gcHJvcHNbcHJvcF0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bcHJvcF0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGV4dCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU1hdGNoZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbU1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIExldCB0aGUgb3V0cHV0IGJlIHRoZSBpbnB1dCB1bnRvdWNoZWRcclxuICAgICAgICAgICAgICAgICAgICBvdXQgPSBpdGVtcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdBZG1pbkFwcCcpXHJcblx0XHQuY29udHJvbGxlcignTWFuZ2FDb250cm9sbGVyJywgTWFuZ2FDb250cm9sbGVyKTtcclxuXHJcblx0XHRNYW5nYUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckZG9jdW1lbnQnLCAnTWFuZ2FTZXJ2aWNlJywgJ01hbmdhR3JpZCcsICdUYWdTZXJ2aWNlJywgJ05vdGlmaWNhdGlvbicsICdibG9ja1VJJ107XHJcblxyXG5cdFx0ZnVuY3Rpb24gTWFuZ2FDb250cm9sbGVyKCRzY29wZSwgJHVpYk1vZGFsLCAkZG9jdW1lbnQsIE1hbmdhU2VydmljZSwgTWFuZ2FHcmlkLCBUYWdTZXJ2aWNlLCBOb3RpZmljYXRpb24sIGJsb2NrVUkpIHtcclxuXHRcdFx0dmFyIGNyZWF0ZU1hbmdhTW9kYWw7XHJcblx0XHRcdHZhciBlZGl0TWFuZ2FNb2RhbDtcclxuXHRcdFx0dmFyIGN1cnJlbnRNYW5nYUlkO1xyXG5cdFx0XHRcclxuXHRcdFx0JHNjb3BlLnRhZ3MgPSBbXTtcclxuXHRcdFx0JHNjb3BlLnNlbGVjdGVkVGFncyA9IFtdO1xyXG5cclxuXHJcblx0XHRcdCRzY29wZS5vcGVuRWRpdE1hbmdhID0gb3BlbkVkaXRNYW5nYTtcclxuXHRcdFx0JHNjb3BlLnJlbW92ZU1hbmdhID0gcmVtb3ZlTWFuZ2E7XHJcblx0XHRcdCRzY29wZS51cGRhdGVNYW5nYSA9IHVwZGF0ZU1hbmdhO1xyXG5cdFx0XHQkc2NvcGUuY2xvc2VFZGl0TWFuZ2EgPSBjbG9zZUVkaXRNYW5nYTtcclxuXHRcdFx0JHNjb3BlLm9wZW5DcmVhdGVNYW5nYSA9IG9wZW5DcmVhdGVNYW5nYTtcclxuXHRcdFx0JHNjb3BlLmNsb3NlQ3JlYXRlTWFuZ2EgPSBjbG9zZUNyZWF0ZU1hbmdhO1xyXG5cdFx0XHQkc2NvcGUuYWRkTWFuZ2EgPSBhZGRNYW5nYTtcclxuXHJcblx0XHRcdGluaXQoJHNjb3BlKTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbml0IGdpZCBtYW5nYVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gJHNjb3BlXHJcbiAgICAgICAgICAgICAqL1xyXG5cdFx0XHRmdW5jdGlvbiBpbml0KCRzY29wZSkge1xyXG5cdFx0XHRcdE1hbmdhR3JpZC5pbml0R3JpZCgkc2NvcGUpO1xyXG5cdFx0XHR9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlIE1vZGFsIHNldHRpbmdcclxuICAgICAgICAgICAgICovXHJcblx0XHRcdGZ1bmN0aW9uIG9wZW5DcmVhdGVNYW5nYSgpIHtcclxuXHRcdFx0XHR2YXIgYmxvY2sgPSBibG9ja1VJLmluc3RhbmNlcy5nZXQoJ2NyZWF0ZU1hbmdhQmxvY2snKTtcclxuXHRcdFx0XHR2YXIgcGFyZW50RWxlID0gJGRvY3VtZW50LmZpbmQoJy5tYW5nYS1ncmlkJyk7XHJcblx0XHRcdFx0Y3JlYXRlTWFuZ2FNb2RhbCA9ICR1aWJNb2RhbC5vcGVuKHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnY3JlYXRlTWFuZ2FNb2RhbC5odG1sJyxcclxuXHRcdFx0XHRcdHNjb3BlOiAkc2NvcGUsXHJcblx0XHRcdFx0XHRzaXplOiAnbGcnLFxyXG5cdFx0XHRcdFx0YXBwZW5kVG86IHBhcmVudEVsZVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRibG9jay5zdGFydCgpO1xyXG5cdFx0XHRcdFRhZ1NlcnZpY2UuZ2V0VGFncygpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG5cdFx0XHRcdFx0aWYgKCByZXMuc3RhdHVzID09IDAgKSB7XHJcblx0XHRcdFx0XHRcdGNyZWF0ZU1hbmdhTW9kYWwuZGlzbWlzcygpO1xyXG5cdFx0XHRcdFx0XHROb3RpZmljYXRpb24uZXJyb3IoJ0ludGVybmFsIGVycm9yJyk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdCRzY29wZS50YWdzID0gcmVzLnRhZ3M7XHJcblx0XHRcdFx0XHRibG9jay5zdG9wKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGZ1bmN0aW9uIGFkZE1hbmdhKCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRmdW5jdGlvbiBjbG9zZUNyZWF0ZU1hbmdhKCkge1xyXG5cdFx0XHRcdGNyZWF0ZU1hbmdhTW9kYWwuZGlzbWlzcygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBvcGVuRWRpdE1hbmdhKG1hbmdhSWQpIHtcclxuXHRcdFx0XHRjdXJyZW50TWFuZ2FJZCA9IG1hbmdhSWQ7XHJcblx0XHRcdFx0dmFyIHBhcmVudEVsZSA9ICRkb2N1bWVudC5maW5kKCcubWFuZ2EtZ3JpZCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGVkaXRNYW5nYU1vZGFsID0gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdlZGl0TWFuZ2FNb2RhbC5odG1sJyxcclxuXHRcdFx0XHRcdHNjb3BlOiAkc2NvcGUsXHJcblx0XHRcdFx0XHRhcHBlbmRUbzogcGFyZW50RWxlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZU1hbmdhKCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd1cGRhdGUnICsgY3VycmVudE1hbmdhSWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRmdW5jdGlvbiBjbG9zZUVkaXRNYW5nYSgpIHtcclxuXHRcdFx0XHRlZGl0TWFuZ2FNb2RhbC5kaXNtaXNzKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlbW92ZU1hbmdhKG1hbmdhSWQpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygncmVtb3ZlJyk7XHJcblx0XHRcdH1cclxuXHRcdCAgICBcclxuXHRcdH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnQWRtaW5BcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ01hbmdhR3JpZCcsIE1hbmdhR3JpZCk7XHJcblxyXG5cdFx0TWFuZ2FHcmlkLiRpbmplY3QgPSBbJyRjb21waWxlJywgJ01hbmdhU2VydmljZScsICdEVE9wdGlvbnNCdWlsZGVyJywgJ0RUQ29sdW1uQnVpbGRlcicsICdEVENvbHVtbkRlZkJ1aWxkZXInXTtcclxuXHJcblx0XHRmdW5jdGlvbiBNYW5nYUdyaWQoJGNvbXBpbGUsIE1hbmdhU2VydmljZSwgRFRPcHRpb25zQnVpbGRlciwgRFRDb2x1bW5CdWlsZGVyLCBEVENvbHVtbkRlZkJ1aWxkZXIpIHtcclxuXHJcblx0XHRcdHZhciBNQU5HQV9MSVNUX0FQSSA9IENvbmZpZy5hcGlEb21haW4gKyAnbWFuZ2FzJztcclxuXHJcblx0XHRcdHZhciBzZXJ2aWNlID0ge1xyXG5cdFx0XHRcdGluaXRHcmlkOiBpbml0R3JpZFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0cmV0dXJuIHNlcnZpY2U7XHJcbiBcclxuXHRcdFx0ZnVuY3Rpb24gaW5pdEdyaWQoJHNjb3BlKSB7XHJcblxyXG5cdFx0XHQgICAgJHNjb3BlLmR0T3B0aW9ucyA9IERUT3B0aW9uc0J1aWxkZXIubmV3T3B0aW9ucygpXHJcblx0XHRcdCAgICBcdC53aXRoT3B0aW9uKCdhamF4Jywge1xyXG5cdFx0XHQgICAgXHRcdHVybDogTUFOR0FfTElTVF9BUEksXHJcblx0XHRcdCAgICBcdFx0dHlwZTogJ0dFVCcsIFxyXG5cdFx0XHQgICAgXHRcdGRhdGE6IGZ1bmN0aW9uIChkYXRhLCBkdEluc3RhbmNlKSB7XHJcblx0XHRcdCAgICBcdFx0XHRkYXRhLm9mZnNldCA9IGRhdGEuc3RhcnQ7XHJcblx0XHRcdCAgICBcdFx0XHRkYXRhLmxpbWl0ID0gZGF0YS5sZW5ndGg7XHJcblx0XHRcdCAgICBcdFx0XHRkYXRhLnNlYXJjaCA9IGRhdGEuc2VhcmNoLnZhbHVlO1xyXG5cdFx0XHQgICAgXHRcdFx0ZGF0YS5jb2x1bW4gPSBkYXRhLm9yZGVyWzBdLmNvbHVtbjtcclxuXHRcdFx0ICAgIFx0XHRcdGRhdGEub3JkZXIgPSBkYXRhLm9yZGVyWzBdLmRpcjtcclxuXHRcdFx0ICAgIFx0XHR9XHJcblx0XHRcdCAgICBcdH0pXHJcblx0XHRcdCAgICBcdC53aXRoRGF0YVByb3AoJ2RhdGEnKVxyXG4gICAgIFx0XHRcdFx0LndpdGhPcHRpb24oJ3NlcnZlclNpZGUnLCB0cnVlKVxyXG5cdFx0XHQgICAgXHQud2l0aFBhZ2luYXRpb25UeXBlKCdzaW1wbGVfbnVtYmVycycpXHJcblx0ICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKCdkcmF3Q2FsbGJhY2snLCBkcmF3Q2FsbGJhY2suYmluZChudWxsLCAkc2NvcGUpKVxyXG5cclxuXHRcdFx0ICAgICRzY29wZS5kdENvbHVtbnMgPSBbXHJcblx0XHRcdCAgICAgICAgRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbignbWFuZ2FfbmFtZScpLFxyXG5cdFx0XHQgICAgICAgIERUQ29sdW1uQnVpbGRlci5uZXdDb2x1bW4oJ3NsdWcnKSxcclxuXHRcdFx0ICAgICAgICBEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKCd2aWV3X2NvdW50JyksXHJcblx0XHRcdCAgICAgICAgRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbignbGlrZV9jb3VudCcpLFxyXG5cdFx0XHQgICAgICAgIERUQ29sdW1uQnVpbGRlci5uZXdDb2x1bW4oJ2lkJyksXHJcblx0XHRcdCAgICBdO1xyXG5cclxuXHRcdFx0ICAgICRzY29wZS5kdENvbHVtbkRlZnMgPSBbXHJcblx0XHRcdCAgICAgICAgRFRDb2x1bW5EZWZCdWlsZGVyLm5ld0NvbHVtbkRlZigwKSxcclxuXHRcdFx0ICAgICAgICBEVENvbHVtbkRlZkJ1aWxkZXIubmV3Q29sdW1uRGVmKDEpLm5vdFNvcnRhYmxlKCksXHJcblx0XHRcdCAgICAgICAgRFRDb2x1bW5EZWZCdWlsZGVyLm5ld0NvbHVtbkRlZigyKS5ub3RTb3J0YWJsZSgpLFxyXG5cdFx0XHQgICAgICAgIERUQ29sdW1uRGVmQnVpbGRlci5uZXdDb2x1bW5EZWYoMykubm90U29ydGFibGUoKSxcclxuXHRcdFx0ICAgICAgICBEVENvbHVtbkRlZkJ1aWxkZXIubmV3Q29sdW1uRGVmKDQpLm5vdFNvcnRhYmxlKCkud2l0aE9wdGlvbignd2lkdGgnLCAnMjAlJykucmVuZGVyV2l0aChmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZnVsbCkge1xyXG5cdFx0XHQgICAgICAgIFx0XHJcblx0XHRcdCAgICAgICAgXHQvLyByZXR1cm4gZGF0YTtcclxuXHRcdFx0ICAgICAgICBcdHJldHVybiByZW5kZXJBY3Rpb24oZGF0YSk7XHJcblx0XHRcdCAgICAgICAgfSlcclxuXHRcdFx0ICAgIF07XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRmdW5jdGlvbiByZW5kZXJBY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdHZhciBidXR0b24gPSAnPGRpdiBjbGFzcz1cImFjdGlvblwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdCAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgdXBkYXRlXCIgbmctY2xpY2s9XCJvcGVuRWRpdE1hbmdhKCcrIGRhdGEgKycpXCI+RWRpdDwvYnV0dG9uPiAnICtcclxuXHRcdFx0XHRcdFx0ICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciByZW1vdmVcIiAgbmctY2xpY2s9XCJyZW1vdmVNYW5nYSgnKyBkYXRhICsnKVwiPlJlbW92ZTwvYnV0dG9uPicgK1xyXG5cdFx0XHRcdFx0XHQgICAgICc8L2Rpdj4nO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gYnV0dG9uO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBkcmF3Q2FsbGJhY2soJHNjb3BlLCBkYXRhKSB7XHJcblx0XHRcdFx0dmFyIGFjdGlvbkVsZSA9IGFuZ3VsYXIuZWxlbWVudCgnLmFjdGlvbicpO1xyXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCggYWN0aW9uRWxlLCBmdW5jdGlvbiAoZWxlKSB7XHJcblx0XHRcdFx0XHR2YXIgdGVtcGxhdGUgPSAkY29tcGlsZShhbmd1bGFyLmVsZW1lbnQoZWxlKS5odG1sKCkpKCRzY29wZSk7XHJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoZWxlKS5odG1sKHRlbXBsYXRlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdBZG1pbkFwcCcpXHJcblx0XHQuZmFjdG9yeSgnTWFuZ2FTZXJ2aWNlJywgTWFuZ2FTZXJ2aWNlKTtcclxuXHJcblx0XHRNYW5nYVNlcnZpY2UuJGluamVjdCA9IFtdO1xyXG5cclxuXHRcdGZ1bmN0aW9uIE1hbmdhU2VydmljZSgpIHtcclxuXHRcdFx0dmFyIHNlcnZpY2UgPSB7XHJcblx0XHRcdFx0Z2V0OiBnZXRcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHJldHVybiBzZXJ2aWNlO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0KCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdnZXQgZnJvbSBzdicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0FkbWluQXBwJylcclxuICAgICAgICAuZmFjdG9yeSgnVGFnU2VydmljZScsIFRhZ1NlcnZpY2UpO1xyXG5cclxuICAgICAgICBUYWdTZXJ2aWNlLiRpbmplY3QgPSBbJ1JlcXVlc3QnXTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gVGFnU2VydmljZShSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIHZhciBHRVRfQUxMX1RBR1NfQVBJID0gQ29uZmlnLmFwaURvbWFpbiArICd0YWdzJztcclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VzID0ge1xyXG4gICAgICAgICAgICAgICAgZ2V0VGFnczogZ2V0VGFnc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VGFncygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZXF1ZXN0LnNlbmQoJ0dFVCcsIEdFVF9BTExfVEFHU19BUEkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
